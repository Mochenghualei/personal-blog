---
title: ã€é«˜é¢‘é¢è¯•é¢˜ã€‘ï¼šæ‰‹å†™å®ç°é˜²æŠ–å‡½æ•°ğŸ”¥
author: shuai
date: "2022-6-11"
categories:
  - å‰ç«¯
tags:
  - é¢è¯•
---

```js
// é˜²æŠ–ä½œç”¨ï¼šé˜²æ­¢é«˜é¢‘æ“ä½œå¯¼è‡´çš„å‡½æ•°é¢‘ç¹å¤šæ¬¡è°ƒç”¨é—®é¢˜ï¼›
// æ¯”å¦‚ï¼šé¡µé¢æ»šåŠ¨é¢‘ç¹è§¦å‘scrollï¼›çª—å£å˜åŒ–é¢‘ç¹è§¦å‘resizeï¼›æ–‡æœ¬æ¡†è¾“å…¥é¢‘ç¹è§¦å‘inputäº‹ä»¶ï¼›æ‹–æ‹½äº‹ä»¶ï¼›é”®ç›˜keypressäº‹ä»¶...
// åº”ç”¨ï¼šè¾“å…¥æ¡†è¿ç»­è¾“å…¥å€¼ï¼Œåªåœ¨æœ€åä¸€æ¬¡è¾“å…¥å®Œæˆæ‰è§¦å‘æŸ¥è¯¢ï¼›ç‚¹èµã€è¡¨å•æäº¤ç­‰ç±»ä¼¼åŠ¨ä½œ

//  lodashä½“éªŒ
// function input(e) {
//   console.log(e.target.value)
// }

// let handleInput = _.debounce(input, 500, {
//   leading: false,
//   trailing: true,
// })

// ç®€å•å®ç°:lodashçš„optionså‚æ•°ä½¿ç”¨immediateä»£æ›¿
/**
 * @param {function} func :ä¼ å…¥debounceçš„æ‰§è¡Œå‡½æ•°
 * @param {number} wait :å…è®¸å‡½æ•°è°ƒç”¨çš„æ—¶é—´é—´éš”
 * @param {boolean} immediate :æ˜¯å¦ç«‹å³è°ƒç”¨å‡½æ•°
 */
function debounce(func, wait, immediate) {
  let timer, context, args
  let delay = () =>
    setTimeout(() => {
      // timeræ¸…ç©ºæ”¾åœ¨å®šæ—¶å™¨å†…éƒ¨ï¼Œä¿è¯æœ€åä¸€æ¬¡æ‰§è¡Œåtimerä¸ºnull
      timer = null
      if (!immediate) {
        func.apply(context, args)
        context = args = null
      }
    }, wait)
  return function (...params) {
    if (!timer) {
      timer = delay()
      // å¦‚æœç«‹å³æ‰§è¡Œè°ƒç”¨å‡½æ•°ï¼Œå¦åˆ™ç¼“å­˜contextå’Œargs
      if (immediate) {
        func.apply(this, params)
      } else {
        context = this
        args = params
      }
    } else {
      clearTimeout(timer)
      timer = delay()
    }
  }
}

function input(e) {
  console.log(e.target.value)
}

let handleInput = debounce(input, 500, false)
```
